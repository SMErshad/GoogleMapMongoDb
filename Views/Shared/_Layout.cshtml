<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>@ViewData["Title"] - GoogleMapMongoDb</title>

        <environment names="Development">
            <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
            <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-XdYbMnZ/QjLh6iI4ogqCTaIjrFk87ip+ekIjefZch0Y+PvJ8CDYtEs1ipDmPorQ+" crossorigin="anonymous">
            <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.css" />
            <link href="~/lib/bootstrap/dist/css/bootstrap-theme.css" rel="stylesheet" />
            <link rel="stylesheet" href="~/lib/bootstrap-touch-carousel/dist/css/bootstrap-touch-carousel.css" />
            <link rel="stylesheet" href="~/css/site.css" />
            @*<link href="~/css/jqueryraty.css" rel="stylesheet" />*@
            <link href="~/lib/angular-material/angular-material.css" rel="stylesheet" />

           @* <link href="~/lib/angular-advanced-searchbox/dist/angular-advanced-searchbox.min.css" rel="stylesheet" />*@
            <link href="~/css/animate.css" rel="stylesheet" /> 
            <link href="~/lib/angular-input-stars/angular-input-stars.css" rel="stylesheet" />
<style type='text/css'>
                .gsc-control-cse {
                    font-family: Arial, sans-serif;
                    border-color: #FFFFFF;
                    background-color: #FFFFFF;
                }

                    .gsc-control-cse .gsc-table-result {
                        font-family: Arial, sans-serif;
                    }

                input.gsc-input, .gsc-input-box, .gsc-input-box-hover, .gsc-input-box-focus {
                    border-color: #D9D9D9;
                }

                input.gsc-search-button, input.gsc-search-button:hover, input.gsc-search-button:focus {
                    border-color: #666666;
                    background-color: #CECECE;
                    background-image: none;
                    filter: none;
                }

                .gsc-tabHeader.gsc-tabhInactive {
                    border-color: #FF9900;
                    background-color: #FFFFFF;
                }

                .gsc-tabHeader.gsc-tabhActive {
                    border-color: #E9E9E9;
                    background-color: #E9E9E9;
                    border-bottom-color: #FF9900;
                }

                .gsc-tabsArea {
                    border-color: #FF9900;
                }

                .gsc-webResult.gsc-result, .gsc-results .gsc-imageResult {
                    border-color: #FFFFFF;
                    background-color: #FFFFFF;
                }

                    .gsc-webResult.gsc-result:hover, .gsc-imageResult:hover {
                        border-color: #FFFFFF;
                        background-color: #FFFFFF;
                    }

                .gs-webResult.gs-result a.gs-title:link, .gs-webResult.gs-result a.gs-title:link b, .gs-imageResult a.gs-title:link, .gs-imageResult a.gs-title:link b {
                    color: #0000CC;
                }

                .gs-webResult.gs-result a.gs-title:visited, .gs-webResult.gs-result a.gs-title:visited b, .gs-imageResult a.gs-title:visited, .gs-imageResult a.gs-title:visited b {
                    color: #0000CC;
                }

                .gs-webResult.gs-result a.gs-title:hover, .gs-webResult.gs-result a.gs-title:hover b, .gs-imageResult a.gs-title:hover, .gs-imageResult a.gs-title:hover b {
                    color: #0000CC;
                }

                .gs-webResult.gs-result a.gs-title:active, .gs-webResult.gs-result a.gs-title:active b, .gs-imageResult a.gs-title:active, .gs-imageResult a.gs-title:active b {
                    color: #0000CC;
                }

                .gsc-cursor-page {
                    color: #0000CC;
                }

                a.gsc-trailing-more-results:link {
                    color: #0000CC;
                }

                .gs-webResult .gs-snippet, .gs-imageResult .gs-snippet, .gs-fileFormatType {
                    color: #000000;
                }

                .gs-webResult div.gs-visibleUrl, .gs-imageResult div.gs-visibleUrl {
                    color: #008000;
                }

                .gs-webResult div.gs-visibleUrl-short {
                    color: #008000;
                }

                .gs-webResult div.gs-visibleUrl-short {
                    display: none;
                }

                .gs-webResult div.gs-visibleUrl-long {
                    display: block;
                }

                .gs-promotion div.gs-visibleUrl-short {
                    display: none;
                }

                .gs-promotion div.gs-visibleUrl-long {
                    display: block;
                }

                .gsc-cursor-box {
                    border-color: #FFFFFF;
                }

                .gsc-results .gsc-cursor-box .gsc-cursor-page {
                    border-color: #E9E9E9;
                    background-color: #FFFFFF;
                    color: #0000CC;
                }

                .gsc-results .gsc-cursor-box .gsc-cursor-current-page {
                    border-color: #FF9900;
                    background-color: #FFFFFF;
                    color: #0000CC;
                }

                .gsc-webResult.gsc-result.gsc-promotion {
                    border-color: #336699;
                    background-color: #FFFFFF;
                }

                .gsc-completion-title {
                    color: #0000CC;
                }

                .gsc-completion-snippet {
                    color: #000000;
                }

                .gs-promotion a.gs-title:link, .gs-promotion a.gs-title:link *, .gs-promotion .gs-snippet a:link {
                    color: #0000CC;
                }

                .gs-promotion a.gs-title:visited, .gs-promotion a.gs-title:visited *, .gs-promotion .gs-snippet a:visited {
                    color: #0000CC;
                }

                .gs-promotion a.gs-title:hover, .gs-promotion a.gs-title:hover *, .gs-promotion .gs-snippet a:hover {
                    color: #0000CC;
                }

                .gs-promotion a.gs-title:active, .gs-promotion a.gs-title:active *, .gs-promotion .gs-snippet a:active {
                    color: #0000CC;
                }

                .gs-promotion .gs-snippet, .gs-promotion .gs-title .gs-promotion-title-right, .gs-promotion .gs-title .gs-promotion-title-right * {
                    color: #000000;
                }

                .gs-promotion .gs-visibleUrl, .gs-promotion .gs-visibleUrl-short {
                    color: #008000;
                }
</style>









<style>
                html, body {
                    height: 100%;
                    margin: 0;
                    padding: 0;
                }

                /*#map {
                    height: 1000px;
                    width:1000px;
                }*/

                .controls {
                    background-color: #fff;
                    border-radius: 2px;
                    border: 1px solid transparent;
                    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
                    box-sizing: border-box;
                    font-family: Roboto;
                    font-size: 15px;
                    font-weight: 300;
                    height: 29px;
                    margin-left: 17px;
                    margin-top: 10px;
                    outline: none;
                    padding: 0 11px 0 13px;
                    text-overflow: ellipsis;
                    width: 400px;
                }

                    .controls:focus {
                        border-color: #4d90fe;
                    }

                    #iw-container  .iw-title {
                                               font-family: 'Open Sans Condensed', sans-serif;
                                               font-size: 22px;
                                               font-weight: 400;
                                               padding: 10px;
                                               background-color: #48b5e9;
                                               color: white;
                                               margin: 1px;
                                               border-radius: 2px 2px 0 0; /* In accordance with the rounding of the default infowindow corners. */
                                            }


                    body[ng-cloak] {
  display:none;
}

.nav, .pagination, .carousel, .panel-title a 
{ cursor: pointer; }
body {
    /*background-color: #FEEBC8;*/
}
div[flex="30"] {
  background-color: #DFDFDF;  
}

section[flex="40"] {
  background-color: #D4E5FA;
}
section[flex="70"] {
  background-color: #E8FCD6;
}
section[flex="20"] {
 background-color: #FFD5E3;
}
section[flex=""] {
 background-color: rgba(0, 128, 0, 0.35);
}


/* Important to set height for column layout */
.boxWithHeight {
  box-sizing: border-box;
  height: 100%;
}

.a, section {
  border: 5px solid rgba(85, 97, 85, 0.27);
  margin: 5px;  
}

section {
  background-color: #dedede;
}

.contentdemoBasicUsage div.demo-content {
  height: 600px; }
.contentdemoBasicUsage div[ng-controller] {
  height: 100%;
  padding-bottom: 15px; }
.contentdemoBasicUsage md-content {
  padding: 24px; }

label, input { display:block; }
    input.text { margin-bottom:12px; width:95%; padding: .4em; }
    fieldset { padding:0; border:0; margin-top:25px; }
    h1 { font-size: 1.2em; margin: .6em 0; }
    div#users-contain { width: 350px; margin: 20px 0; }
    div#users-contain table { margin: 1em 0; border-collapse: collapse; width: 100%; }
    div#users-contain table td, div#users-contain table th { border: 1px solid #eee; padding: .6em 10px; text-align: left; }
    .ui-dialog .ui-state-error { padding: .3em; }
    .validateTips { border: 1px solid transparent; padding: 0.3em; }
    div #block textarea{
    /*background-color: #bca;*/
    width: 10px;
    border: 2px solid green;
    
  }

 .hidden {
  visibility: hidden;
}
 .fadeIn { transition: all 300ms ease-in 5s; }
 .fadeInDown { transition: all 300ms ease-in 2s; }
 .fadeInUp { transition: all 300ms ease-in 5s; }
 .fadeInLeft { transition: all 300ms ease-in 5s; }
 

		body {
			font-family: Helvetica Neue, Helvetica, Arial;
		}

		.car {
			/*background-color: #6699ff;*/
			color: #000000;
		}

		.car-container {
			/*border: 1px solid #999;*/
			margin:5px;
			padding: 2px;
			border-radius: 5px;
		}

		.car-container:nth-child(odd) {
			background-color: #add8e6;
		}
		.car-container:nth-child(even) {
			background-color: #61906e;
		}

    #companyUserComment.fadeInDown { transition: all 2000ms ease-in 2s; } 

		.car h3 {
			color: white;
		}


		
	

  
 </style>
            <script src="~/lib/jquery/dist/jquery.js"></script>
            <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
            @*<script src="~/wwwroot/lib/bootstrap/dist/js/bootstrap.min.js"></script>*@
            <script src="~/lib/bootstrap/dist/js/bootstrap.js"></script> 
            <script src="~/lib/angular/angular.js"></script>
            
            <script src="~/lib/angular-material/angular-material.js"></script>
            <script src="//cdnjs.cloudflare.com/ajax/libs/angular-material-icons/0.6.0/angular-material-icons.min.js"></script>

            <script src="~/lib/angular-resource/angular-resource.js"></script>
            <script src="~/lib/angular-route/angular-route.js"></script>
            <script src="~/lib/angular-animate/angular-animate.js"></script>

            <script src="~/lib/angular-sanitize/angular-sanitize.js"></script>
           @* <link href="~/lib/angular-motion/dist/angular-motion.css" rel="stylesheet" />*@

            <script src="~/lib/angular-aria/angular-aria.js"></script>
            @*<script src="~/lib/angular-inview/angular-inview.js"></script>*@
            @*<script src="~/js/velocity.min.js"></script>*@
            <script src="~/lib/angular-scroll-animate/dist/angular-scroll-animate.js"></script>
                   
            @*<script src="~/lib/angular-bootstrap/ui-bootstrap-tpls.js"></script>*@
            <script src="~/lib/angular-bootstrap/ui-bootstrap-tpls.min.js"></script>
            @*<script src="~/js/ui-bootstrap-tpls-1.1.2.min.js"></script>
            <script src="~/js/ui-bootstrap-tpls-1.1.2.js"></script>*@
            @*<script src="~/lib/angular-advanced-searchbox/dist/angular-advanced-searchbox-tpls.js"></script>*@
            @*<script src="~/lib/angular-advanced-searchbox/dist/angular-advanced-searchbox-tpls.min.js"></script>*@
            @*<script src="~/lib/angular-google-maps/dist/angular-google-maps.js"></script>
            <script src="~/wwwroot/lib/angular-google-maps/dist/angular-google-maps.min.js"></script>*@

            

            <script src="~/lib/angular-input-stars/angular-input-stars.js"></script>
            <script src="~/js/app/modules/myApp.js?v=1"></script>
            <script src="~/js/app/directives/myMap.js?v=1"></script>
            <script src="~/js/app/directives/serviceProduct.js?v=1"></script>
            <script src="~/js/app/directives/inputStars.js"></script>
            <script src="~/js/app/controllers/myController.js?v=7"></script>
            <script src="~/js/app/services/dataFactory.js?v=2"></script>

            
            
            
            <script src="~/js/app/controllers/ratingDemoController.js"></script>

            <script src="~/js/app/controllers/userInputController.js"></script>
                    
            

            
            <script src="~/js/app/Users.js"></script>
            

            

            @*<script src="~/js/jqueryraty.js"></script>*@
            
            <script src="~/js/jrate.js"></script> 
            

        @*<script>
            // This sample uses the Place Autocomplete widget to allow the user to search
            // for and select a place. The sample then displays an info window containing
            // the place ID and other information about the place that the user has
            // selected.
            var htmlBoth = "<br>";

            function initMap() {
              var map = new google.maps.Map(document.getElementById('map'), {
                center: {lat: -33.8688, lng: 151.2195},
                zoom: 10
              });

              var input = document.getElementById('pac-input');

              var autocomplete = new google.maps.places.Autocomplete(input);
              autocomplete.bindTo('bounds', map);

              map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);

              var infowindow = new google.maps.InfoWindow();
              var marker;
               

              //marker.addListener('click', function() {
              //  infowindow.open(map, marker);
              //});

              autocomplete.addListener('place_changed', function() {
                infowindow.close();
                var place = autocomplete.getPlace();
                if (!place.geometry) {
                  return;
                }

                if (place.geometry.viewport) {
                  map.fitBounds(place.geometry.viewport);
                } else {
                  map.setCenter(place.geometry.location);
                  map.setZoom(13);
                }


                marker = new google.maps.Marker({
                    map: map,
                    // Define the place with a location, and a query string.
                   
                    // Attributions help users find your site again.
                    attribution: {
                        source: 'Google Maps JavaScript API',
                        webUrl: 'https://developers.google.com/maps/'
                    }
                    //draggable: true,
                    //animation: google.maps.Animation.DROP
                });


                  // Set the position of the marker using the place ID and location.
                marker.setPlace({
                  placeId: place.place_id,
                  location: place.geometry.location
                  });
                 
                marker.setVisible(true);
                

                google.maps.event.addListener(marker, 'click', function () {
                    htmlBoth = '<br>';

                    var placeID = place.place_id;
                    
                    var reviews = [];
                    var CommentsArray = [];
                    var Rating = parseFloat(place.rating);
                    var userRating = '';
                    //alert(score);
                    var PlaceId = place.place_id;
                    var Name = place.name;
                    var Address = place.formatted_address;
                    var jRateScore = "";
                    var KFC = "KFC";
                    var Food = "Food";
                    var Burger = "Burger";

                    var Product = function Product() {
                        this.Id = 1;
                        this.Name = "KFC";
                        this.Rating = 4.3;
                        this.Comments = ["hgtyftyfyft", "hgddjfghgf"];
                    };
                    var Product = new Product();

                    var Service = function Service() {
                        this.Id = 1;
                        this.Name = "KFC";
                        this.Type = "Food";
                        this.Description = "Burger";
                        this.serviceRating = 4.3;
                        this.serviceComments = ["hgtyftyfyft", "hgddjfghgf"];
                    };

                    var Service = new Service();

                    var obje = function Comment() {
                        this.Author = "X";
                        this.Text = "very Nice";
                    };


                    var Comment1 = new obje();
                    var Comment2 = new obje();
                    var Comment3 = new obje();

                    //var companyService = {"Id": 1, "Name": KFC, "Type": Food, "Description": Burger, "Rating": 4.5, "serviceComments":["Very good burger","hftftyftyftyfuy"]};
                    //companyService = $.parseJSON(Service);
                    var company = {
                        "PlaceId": PlaceId, "Name": Name, "Rating": Rating, "Comments": ["", "", "", "", ""], "UsersComments": [5], "Department": null, "Product": Product, "Service": Service
                    };
                    $('#md-user-input').html("");
                    $("#md-comments").html("");
                    
                    $('#md-user-input').prepend('<div id="iw-container" class=""><strong>' + place.name + '</strong><br>' +
                                                  'Place ID: ' + place.place_id + '<br>' + place.formatted_address + '<br><br>' + '<div id="jRateFinal" style="height:70px;width:350px;"class="jRate"></div><div id="block" style="height:200px;width:500px;" hidden>Would you like to put a comment as well?<br><form><textarea id="addComment" type></textarea><br><input type="submit" id="submitComment" value="Add a Comment"></form></div>');

                    $(".jRate").jRate({
                        startColor: 'cyan',
                        endColor: 'blue',
                        rating: place.rating,
                        onSet: function (score) {
                            jRateScore = score;
                            if (place.rating == null)
                                userRating = parseFloat(jRateScore);
                            else
                                userRating = parseFloat((parseFloat(jRateScore) + parseFloat(place.rating)) / 2);
                            //alert(score);
                            $("#block").show();
                            $("#block textarea").animate({
                                width: "400%",
                                opacity: 0.4,
                                fontSize: "1em"
                                //borderWidth: "10px"
                            }, 7000);
                            $("#submitComment").click(function (e) {
                                e.preventDefault();
                                addComment(placeID, $("#addComment").val());
                                $("#block").hide();
                            });
                            
                            
                            $.ajax({
                                type: "POST",
                                url: "../Home/UserRatingSave",
                                data: { PlaceID: placeID, UserRating: userRating },
                                dataType: "json",

                                success: function (dataa) {
                                    dataa = $.parseJSON(dataa);
                                    var responseRating = dataa.Rating;
                                    console.log(responseRating);

                                    document.getElementById('jRateFinal').innerHTML = "<br>";

                                    //if (responseRating == NaN) {
                                        $(".jRate").jRate({
                                            startColor: 'cyan',
                                            endColor: 'blue',
                                            rating: responseRating,
                                            readonly: true
                                        });

                                        
                                        
                                    //} else {
                                    //    $(".jRate").jRate({
                                    //        startColor: 'cyan',
                                    //        endColor: 'blue',
                                    //        rating: parseFloat((parseFloat(jRateScore) + parseFloat(responseRating)) / 2),
                                    //        readonly: true
                                    //    });
                                    //}
                                        //showDialog(placeID);
                                    //$("#md-user-input").show();
                                }
                            });
                            
                        }
                    });



                    //$("#submitOur").click(function (e) {
                    //    e.preventDefault();
                    //    var userComment = $("#user-input").val();
                    //     $('#md-comments').append(userComment);

                    //    $.ajax({
                    //        type: "POST",
                    //        url: "../Home/UserCommentSave",
                    //        data: { PlaceID: placeID, UserComment: userComment },
                    //        dataType: "json",

                    //        success: function (dataa) {

                    //            console.log(dataa);
                    //            //result = $.parseJSON(dataa);
                    //            reviews = dataa.Comments;
                    //            ourReviews = dataa.UsersComments;
                    //            //userComment = dataa.userComment;
                    //            //htmlBoth += "<br><strong>Recent Comment: " + userComment + "</strong><br>";


                    //            console.log(reviews);
                    //            console.log(ourReviews);
                    //            //if (Array.isArray(reviews)) {
                    //            //    for (var key in reviews) {
                    //            //        if (dataa.hasOwnProperty(key)) {

                    //            //            htmlBoth += "<br><strong>ourComment[" + key + "]:</strong> " + reviews[key] + "<br>";
                    //            //        }
                    //            //    }
                    //            //};
                    //            //if (reviews != undefined)
                    //            //{
                    //            //    $.each(reviews, function (index, item) {
                    //            //        console.log("Comment[" + index + "]: " + item);
                    //            //        //CommentsArray.push(item);
                    //            //        htmlBoth += "<br><strong>GoogleComment[" + index + "]:</strong> " + item + "<br>";

                    //            //    });
                    //            //}
                    //            //if (ourReviews != undefined)
                    //            //{
                    //            //    $.each(ourReviews, function (index, item) {
                    //            //        console.log("Comment[" + index + "]: " + item);
                    //            //        //CommentsArray.push(item);
                    //            //        htmlBoth += "<br><strong>OurComment[" + index + "]:</strong> " + item + "<br>";

                    //            //    });
                    //            //}

                    //            //htmlBoth += "</br>";
                    //            //var htmlOur = "<br>";

                    //            //$("#md-comments").append(htmlBoth);

                    //            ////document.getElementById('md-comments').innerHTML = htmlBoth;
                    //            //document.getElementById('md-our-comments').innerHTML = htmlOur;
                    //        }
                    //    });


                    //});

                    

               
                    
                    //var Comment = document.getElementById('add_comment1').text;
                    //Comments = reviews;
                    

                        $.ajax({
                            type: "POST",
                            url: "../Home/GoogleComments",
                            data: { PlaceID: placeID },
                            dataType: "json",
                                
                            success: function (dataJson){

                            
                                console.log(dataJson);
                                result = $.parseJSON(dataJson).result;
                                reviews = result.reviews;
                                //htmlBoth += "<div>";
                                if (reviews != undefined)
                                {
                                    $.each(reviews, function (index, item) {
                                        console.log("GoogleComment[" + index + "]: " + item);
                                        CommentsArray.push(item.text);
                                        //htmlBoth += "<br><strong>GoogleComment[" + index + "]:</strong> " + item.text + "<br>";

                                    });

                                    company.Comments = new Array();
                                    for (var i = 0; i < CommentsArray.length; i++) {

                                        company.Comments.push(CommentsArray[i]);

                                    };

                                    $("#md-comments").append(htmlBoth);
                                }
                                
                                 
                                $.ajax({
                                    type: "POST",
                                    url: "../Home/SavePlace",
                                    data: JSON.stringify(company),
                                    contentType: "application/json",
                                    dataType: "json",
                                    traditional:true,

                                    success: function (response) {
                                        console.log(response);
                                        var result = $.parseJSON(response);
                                        var reviews = result.Comments;
                                        var ourReviews = result.UsersComments;
                                        //userComment = dataa.userComment;
                                        //htmlBoth += "<br><strong>Recent Comment: " + userComment + "</strong><br>";


                                        console.log(reviews);
                                        console.log(ourReviews);
                                        console.log(response);
                                        //result = $.parseJSON(response);
                                        
                                        //userComment = response.userComment;
                                        //htmlBoth += "<br><strong>Recent Comment: " + userComment + "</strong><br>";
                                        
                                            
                                        if (!($.isEmptyObject(ourReviews))) {
                                                $.each(ourReviews, function (index, item) {
                                                    console.log("OurComment[" + index + "]: " + item);
                                                    CommentsArray.push(item);
                                                    htmlBoth += "<br><strong>OurComment[" + index + "]:</strong> " + item + "<br>";

                                                });
                                            }
                                        if (!($.isEmptyObject(reviews))) {
                                                $.each(reviews, function (index, item) {
                                                    console.log("GoogleComment[" + index + "]: " + item);
                                                    CommentsArray.push(item);
                                                    htmlBoth += "<br><strong>GoogleComment[" + index + "]:</strong> " + item + "<br>";

                                                });
                                            }

                                            htmlBoth += "</br>";
                                            //var htmlOur = "<br>";

                                            $("#md-comments").append(htmlBoth);



                                            //console.log(reviews);
                                            //if (reviews != undefined) {
                                            //    $.each(reviews, function (index, item) {
                                            //        console.log("Comment[" + index + "]: " + item);
                                            //        CommentsArray.push(item);
                                            //        htmlBoth += "<br><strong>Comment[" + index + "]:</strong> " + item + "<br>";

                                            //    });
                                            //}

                                            //htmlBoth += "</br>";
                                            //var htmlOur = "<br>";

                                            //$("#md-comments").append(htmlBoth);
                                        
                                        //document.getElementById('md-comments').innerHTML = htmlBoth;
                                        //document.getElementById('md-our-comments').innerHTML = htmlOur;
                                    }
                                });


                                
                            },
                            error: function (err) {
                                console.log(err);
                            }
                        });                   

                    //document.getElementById('md-comments').innerHTML = htmlBoth;
                    //document.getElementById('md-place').innerHTML = "<div><strong>Place: " + place.name + "</strong><br>Place ID: " + place.place_id + "<br>Address: " + place.formatted_address + "<br>Phone Number: " + place.formatted_phone_number + "<br>" + place.icon + "<br>Rating: " + place.rating + "<br><br></div><div style='height:70px;width:350px;' class='jRate></div><div><form id='userComment'><input type='textarea' id='comment'/><input type='submit' value='Add Comment' id='add_comment1'></form></div>";

                    

                    infowindow.setContent('<div id="iw-container" class=""><strong>' + place.name + '</strong><br>' +
                    'Place ID: ' + place.place_id + '<br>' +
                    place.formatted_address + '<br><br></div>');
                                  
                   
                    infowindow.open(map, marker);

                });                        
              });
            }


            
            function showDialog(placeID) {
                var dialog, form;
                dialog = $( "#dialog-form" ).dialog({
                    autoOpen: false,
                    height: 300,
                    width: 450,
                    modal: true,
                    buttons: {
                        "Add a comment": addComment,
                        Cancel: function() {
                            dialog.dialog( "close" );
                        }
                    },
                    close: function() {
                        form[0].reset();
                        //allFields.removeClass( "ui-state-error" );
                    }
                });
 
                form = dialog.find( "form" ).on( "submit", function( event ) {
                    event.preventDefault();
                    var userComment = $("#userComment").value();
                    addComment(placeID, userComment);
                });
 
                $("#jRateFinal").click( function () {
                    dialog.dialog("open");
                      $("#block").animate({
                            width: "70%",
                            opacity: 0.4,
                            marginLeft: "0.6in",
                            fontSize: "3em",
                            borderWidth: "10px"
                        }, 1500);
                    });
                
            
            }

            function addComment(placeID, userComment) {
                $("#md-comments").prepend(userComment);
                $.ajax({
                    type: "POST",
                    url: "../Home/UserCommentSave",
                    data: { PlaceID: placeID, UserComment: userComment },
                    dataType: "json",

                    success: function (dataa) {

                        console.log(dataa);
                        dataa = $.parseJSON(dataa);
                        ourReviews = dataa.UsersComments;
                        console.log(ourReviews);
                        
                       
                       
                       }
                });
            }
            function toggleBounce() {
                if (marker.getAnimation() !== null) {
                    marker.setAnimation(null);
                } else {
                    marker.setAnimation(google.maps.Animation.BOUNCE);
                }
            }
</script>*@
                       
            @*<script src="~/js/angular-google-maps.min.js"></script>*@
            <script src="~/js/site.js"></script>
        </environment>
        <environment names="Staging,Production">
            <link rel="stylesheet" href="//ajax.aspnetcdn.com/ajax/bootstrap/3.0.0/css/bootstrap.min.css"
                  asp-fallback-href="~/lib/bootstrap/css/bootstrap.min.css"
                  asp-fallback-test-class="hidden" asp-fallback-test-property="visibility" asp-fallback-test-value="hidden" />
            <link rel="stylesheet" href="//ajax.aspnetcdn.com/ajax/bootstrap-touch-carousel/0.8.0/css/bootstrap-touch-carousel.css"
                  asp-fallback-href="~/lib/bootstrap-touch-carousel/css/bootstrap-touch-carousel.css"
                  asp-fallback-test-class="carousel-caption" asp-fallback-test-property="display" asp-fallback-test-value="none" />
            <link rel="stylesheet" href="~/css/site.css" asp-file-version="true" />
        </environment>
    </head>
    <body ng-app="myApp" ng-controller="myController as globe" layout="column">

        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a asp-controller="Home" asp-action="Index" class="navbar-brand">GoogleMapMongoDb</a>
                </div>
                <div class="navbar-collapse collapse">
                    <ul class="nav navbar-nav">
                        <li><a asp-controller="Home" asp-action="Index">Home</a></li>
                        <li><a asp-controller="Home" asp-action="About">About</a></li>
                        <li><a asp-controller="Home" asp-action="Contact">Contact</a></li>
                    </ul>
                    @await Html.PartialAsync("_LoginPartial")
                </div>
            </div>
        </div>
        <div class="container body-content row" style="width:100%;height:100%;">
            @RenderBody()
            <hr />
            <footer>
                <p>© 2016 Smart Aspects, BD Inc.</p>
            </footer>
        </div>

        <environment names="Development">
           
            <script src="~/lib/bootstrap/dist/js/bootstrap.js"></script>
            <script src="~/lib/hammer.js/hammer.js"></script>
            <script src="~/lib/bootstrap-touch-carousel/dist/js/bootstrap-touch-carousel.js"></script>
            
            
            
            



        </environment>
        <environment names="Staging,Production">
            <script src="//ajax.aspnetcdn.com/ajax/jquery/jquery-2.1.4.min.js"
                    asp-fallback-src="~/lib/jquery/dist/jquery.min.js"
                    asp-fallback-test="window.jQuery">
            </script>
            <script src="//ajax.aspnetcdn.com/ajax/bootstrap/3.0.0/bootstrap.min.js"
                    asp-fallback-src="~/lib/bootstrap/dist/js/bootstrap.min.js"
                    asp-fallback-test="window.jQuery && window.jQuery.fn && window.jQuery.fn.modal">
            </script>
            <script src="//ajax.aspnetcdn.com/ajax/hammer.js/2.0.4/hammer.min.js"
                    asp-fallback-src="~/lib/hammer.js/hammer.js"
                    asp-fallback-test="window.Hammer">
            </script>
            <script src="//ajax.aspnetcdn.com/ajax/bootstrap-touch-carousel/0.8.0/js/bootstrap-touch-carousel.js"
                    asp-fallback-src="~/lib/bootstrap-touch-carousel/dist/js/bootstrap-touch-carousel.js"
                    asp-fallback-test="window.Hammer && window.Hammer.Instance">
            </script>
            

            <script src="~/js/site.js" asp-file-version="true"></script>
        </environment>

        @RenderSection("scripts", required: false)
    </body>
</html>
